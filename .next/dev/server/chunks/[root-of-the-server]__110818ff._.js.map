{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/kolaa/Downloads/developer-portfolio-website%20%281%29/app/api/contact/route.ts"],"sourcesContent":["import nodemailer from \"nodemailer\";\r\nimport { NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: Request) {\r\n  try {\r\n    const body = await req.json();\r\n    const { name, email, subject, projectType, message } = body;\r\n\r\n    if (!name || !email || !message) {\r\n      return NextResponse.json({ success: false, message: \"Missing required fields\" }, { status: 400 });\r\n    }\r\n\r\n    const SMTP_HOST = process.env.SMTP_HOST;\r\n    const SMTP_PORT = Number(process.env.SMTP_PORT || 587);\r\n    const SMTP_USER = process.env.SMTP_USER;\r\n    const SMTP_PASS = process.env.SMTP_PASS;\r\n    const TO_EMAIL = process.env.CONTACT_EMAIL || \"kolaapravin.work@gmail.com\";\r\n\r\n    let transporter;\r\n\r\n    // If SMTP is not configured, fall back to an ethereal test account for local/dev testing\r\n    if (!SMTP_HOST || !SMTP_USER || !SMTP_PASS) {\r\n      if (process.env.NODE_ENV === \"production\") {\r\n        return NextResponse.json({ success: false, message: \"SMTP server not configured on server\" }, { status: 500 });\r\n      }\r\n\r\n      // development fallback: ethereal test account\r\n      const testAccount = await nodemailer.createTestAccount();\r\n      transporter = nodemailer.createTransport({\r\n        host: \"smtp.ethereal.email\",\r\n        port: 587,\r\n        secure: false,\r\n        auth: {\r\n          user: testAccount.user,\r\n          pass: testAccount.pass,\r\n        },\r\n      });\r\n    } else {\r\n      transporter = nodemailer.createTransport({\r\n        host: SMTP_HOST,\r\n        port: SMTP_PORT,\r\n        secure: SMTP_PORT === 465,\r\n        auth: {\r\n          user: SMTP_USER,\r\n          pass: SMTP_PASS,\r\n        },\r\n      });\r\n    }\r\n\r\n    const html = `\r\n      <h3>New contact form submission</h3>\r\n      <p><strong>Name:</strong> ${name}</p>\r\n      <p><strong>Email:</strong> ${email}</p>\r\n      <p><strong>Project type:</strong> ${projectType}</p>\r\n      <p><strong>Subject:</strong> ${subject}</p>\r\n      <p><strong>Message:</strong></p>\r\n      <p>${message.replace(/\\n/g, \"<br />\")}</p>\r\n    `;\r\n\r\n    const info = await transporter.sendMail({\r\n      from: `${name} <${email}>`,\r\n      to: TO_EMAIL,\r\n      subject: `[Portfolio] ${subject || \"New message\"}`,\r\n      text: message,\r\n      html,\r\n    });\r\n\r\n    const result = { success: true, id: (info && info.messageId) || null } as any;\r\n\r\n    // if ethereal test account was used, provide the preview URL to help debugging in dev\r\n    const previewUrl = nodemailer.getTestMessageUrl(info);\r\n    if (previewUrl) result.preview = previewUrl;\r\n\r\n    return NextResponse.json(result);\r\n  } catch (err) {\r\n    console.error(\"/api/contact error:\", err);\r\n    return NextResponse.json({ success: false, error: String(err) }, { status: 500 });\r\n  }\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;AACA;;;AAEO,eAAe,KAAK,GAAY;IACrC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,OAAO,EAAE,WAAW,EAAE,OAAO,EAAE,GAAG;QAEvD,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;YAC/B,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,SAAS;gBAAO,SAAS;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QACjG;QAEA,MAAM,YAAY,QAAQ,GAAG,CAAC,SAAS;QACvC,MAAM,YAAY,OAAO,QAAQ,GAAG,CAAC,SAAS,IAAI;QAClD,MAAM,YAAY,QAAQ,GAAG,CAAC,SAAS;QACvC,MAAM,YAAY,QAAQ,GAAG,CAAC,SAAS;QACvC,MAAM,WAAW,QAAQ,GAAG,CAAC,aAAa,IAAI;QAE9C,IAAI;QAEJ,yFAAyF;QACzF,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,WAAW;YAC1C;;YAIA,8CAA8C;YAC9C,MAAM,cAAc,MAAM,WAAW,iBAAiB;YACtD,cAAc,WAAW,eAAe,CAAC;gBACvC,MAAM;gBACN,MAAM;gBACN,QAAQ;gBACR,MAAM;oBACJ,MAAM,YAAY,IAAI;oBACtB,MAAM,YAAY,IAAI;gBACxB;YACF;QACF,OAAO;YACL,cAAc,WAAW,eAAe,CAAC;gBACvC,MAAM;gBACN,MAAM;gBACN,QAAQ,cAAc;gBACtB,MAAM;oBACJ,MAAM;oBACN,MAAM;gBACR;YACF;QACF;QAEA,MAAM,OAAO,CAAC;;gCAEc,EAAE,KAAK;iCACN,EAAE,MAAM;wCACD,EAAE,YAAY;mCACnB,EAAE,QAAQ;;SAEpC,EAAE,QAAQ,OAAO,CAAC,OAAO,UAAU;IACxC,CAAC;QAED,MAAM,OAAO,MAAM,YAAY,QAAQ,CAAC;YACtC,MAAM,GAAG,KAAK,EAAE,EAAE,MAAM,CAAC,CAAC;YAC1B,IAAI;YACJ,SAAS,CAAC,YAAY,EAAE,WAAW,eAAe;YAClD,MAAM;YACN;QACF;QAEA,MAAM,SAAS;YAAE,SAAS;YAAM,IAAI,AAAC,QAAQ,KAAK,SAAS,IAAK;QAAK;QAErE,sFAAsF;QACtF,MAAM,aAAa,WAAW,iBAAiB,CAAC;QAChD,IAAI,YAAY,OAAO,OAAO,GAAG;QAEjC,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,uBAAuB;QACrC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAO,OAAO,OAAO;QAAK,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF"}}]
}